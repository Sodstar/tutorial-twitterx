{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-xl border bg-card text-card-foreground shadow\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"font-semibold leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,8JAAM,UAAU,MAG3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,yDACA;QAED,GAAG,KAAK;;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,8JAAM,UAAU,OAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,8JAAM,UAAU,OAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C;QAC1D,GAAG,KAAK;;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,8JAAM,UAAU,OAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,8JAAM,UAAU,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,8JAAM,UAAU,QAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;;AAGb,WAAW,WAAW,GAAG"}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 110, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;AAEA;AAGA;AAFA;AAHA;;;;;AAOA,MAAM,uBAAS,8JAAM,UAAU,MAG7B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,sKAAgB,IAAI;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;;AAGb,OAAO,WAAW,GAAG,sKAAgB,IAAI,CAAC,WAAW;AAErD,MAAM,4BAAc,8JAAM,UAAU,OAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,sKAAgB,KAAK;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,+BAA+B;QAC5C,GAAG,KAAK;;;;;;;AAGb,YAAY,WAAW,GAAG,sKAAgB,KAAK,CAAC,WAAW;AAE3D,MAAM,+BAAiB,8JAAM,UAAU,OAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,sKAAgB,QAAQ;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,wEACA;QAED,GAAG,KAAK;;;;;;;AAGb,eAAe,WAAW,GAAG,sKAAgB,QAAQ,CAAC,WAAW"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,8JAAM,UAAU,MAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IAC1B,qBACE,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,6QACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AACA,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/actions/post.action.tsx"],"sourcesContent":["\"use server\";\nimport prisma from \"@/lib/prisma\";\nimport { getDBUserID } from \"./user.action\";\nimport { revalidatePath } from \"next/cache\";\n\nexport async function createPost(content: string, imageUrl: string) {\n  try {\n    const userId = await getDBUserID();\n    // if (!userId) return {success:false, error:\"User not found\"};\n    if (!userId) return;\n\n    const post = await prisma.post.create({\n      data: {\n        content,\n        image: imageUrl, // directly write image\n        authorId: userId,\n      },\n    });\n\n    revalidatePath(\"/\"); //purge the cache for the home page\n    return { success: true, post };\n  } catch (error) {\n    console.error(error);\n    return { success: false, error: \"Failed to create post\" };\n  }\n}\n\nexport async function getPosts() {\n  try {\n    const posts = await prisma.post.findMany({\n      orderBy: {\n        createdAt: \"desc\",\n      },\n      include: {\n        author: {\n          select: {\n            id: true,\n            name: true,\n            image: true,\n            username: true,\n          },\n        },\n        comments: {\n          include: {\n            author: {\n              select: {\n                id: true,\n                username: true,\n                image: true,\n                name: true,\n              },\n            },\n          },\n          orderBy: {\n            createdAt: \"asc\",\n          },\n        },\n        likes: {\n          select: {\n            userId: true,\n          },\n        },\n        _count: {\n          select: {\n            likes: true,\n            comments: true,\n          },\n        },\n      },\n    });\n\n    return posts;\n  } catch (error) {\n    console.log(\"Error in getPosts\", error);\n    throw new Error(\"Failed to fetch posts\");\n  }\n}\n\nexport async function toggleLike(postId: string) {\n  if (!postId) return;\n  try {\n    const userId = await getDBUserID();\n    if (!userId) return;\n    const existLike = await prisma.like.findUnique({\n      where: {\n        userId_postId: {\n          userId,\n          postId,\n        },\n      },\n    });\n\n    const post = await prisma.post.findUnique({\n      where: { id: postId },\n      select: { authorId: true },\n    });\n\n    if (!post) throw new Error(\"Post not found\");\n\n    if (existLike) {\n      await prisma.like.delete({\n        where: {\n          userId_postId: {\n            userId,\n            postId,\n          },\n        },\n      });\n    } else {\n      await prisma.$transaction([\n        prisma.like.create({\n          data: {\n            postId,\n            userId,\n          },\n        }),\n        ...(post.authorId !== userId //true утга буцаах үед transaction массивт оруулна\n          ? [\n              prisma.notification.create({\n                data: {\n                  type: \"LIKE\",\n                  userId: post.authorId,\n                  creatorId: userId,\n                  postId,\n                },\n              }),\n            ]\n          : []),\n      ]);\n      revalidatePath(\"/\")\n      return {success:true}\n    }\n  } catch (error) {\n    console.error(error);\n    return {success:false,error:\"Failed to toggle like\"}\n  }\n}\n\nexport async function createComment(postId: string, content: string) {\n    try {\n      const userId = await getDBUserID();\n  \n      if (!userId) return;\n      if (!content) throw new Error(\"Content is required\");\n  \n      const post = await prisma.post.findUnique({\n        where: { id: postId },\n        select: { authorId: true },\n      });\n  \n      if (!post) throw new Error(\"Post not found\");\n  \n      // Create comment and notification in a transaction\n      const [comment] = await prisma.$transaction(async (tx) => {\n        // Create comment first\n        const newComment = await tx.comment.create({\n          data: {\n            content,\n            authorId: userId,\n            postId,\n          },\n        });\n  \n        // Create notification if commenting on someone else's post\n        if (post.authorId !== userId) {\n          await tx.notification.create({\n            data: {\n              type: \"COMMENT\",\n              userId: post.authorId,\n              creatorId: userId,\n              postId,\n              commentId: newComment.id,\n            },\n          });\n        }\n  \n        return [newComment];\n      });\n  \n      revalidatePath(`/`);\n      return { success: true, comment };\n    } catch (error) {\n      console.error(\"Failed to create comment:\", error);\n      return { success: false, error: \"Failed to create comment\" };\n    }\n  }\n  \n  export async function deletePost(postId: string) {\n    try {\n      const userId = await getDBUserID();\n  \n      const post = await prisma.post.findUnique({\n        where: { id: postId },\n        select: { authorId: true },\n      });\n  \n      if (!post) throw new Error(\"Post not found\");\n      if (post.authorId !== userId) throw new Error(\"Unauthorized - no delete permission\");\n  \n      await prisma.post.delete({\n        where: { id: postId },\n      });\n  \n      revalidatePath(\"/\"); // purge the cache\n      return { success: true };\n    } catch (error) {\n      console.error(\"Failed to delete post:\", error);\n      return { success: false, error: \"Failed to delete post\" };\n    }\n  }\n"],"names":[],"mappings":";;;;;;;;;IAKsB;IAsBA;IAmDA;IA4DA;IAiDE"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 229, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/lib/uploadthing.tsx"],"sourcesContent":["import type { OurFileRouter } from \"@/app/api/uploadthing/core\";\nimport { generateUploadButton, generateUploadDropzone } from \"@uploadthing/react\";\n\nexport const UploadButton = generateUploadButton<OurFileRouter>();\nexport const UploadDropzone = generateUploadDropzone<OurFileRouter>();"],"names":[],"mappings":";;;;AACA;;AAEO,MAAM,eAAe,CAAA,GAAA,0KAAA,CAAA,uBAAoB,AAAD;AACxC,MAAM,iBAAiB,CAAA,GAAA,0KAAA,CAAA,yBAAsB,AAAD"}},
    {"offset": {"line": 240, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 246, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/ImageUpload.tsx"],"sourcesContent":["\"use client\";\n\nimport { UploadDropzone } from \"@/lib/uploadthing\";\nimport { XIcon } from \"lucide-react\";\n\ninterface ImageUploadProps {\n  onChange: (url: string) => void;\n  value: string;\n  endpoint: \"postImage\";\n}\n\nfunction ImageUpload({ endpoint, onChange, value }: ImageUploadProps) {\n  if (value) {\n    return (\n      <div className=\"relative size-40\">\n        <img src={value} alt=\"Upload\" className=\"rounded-md size-40 object-cover\" />\n        <button\n          onClick={() => onChange(\"\")}\n          className=\"absolute top-0 right-0 p-1 bg-red-500 rounded-full shadow-sm\"\n          type=\"button\"\n        >\n          <XIcon className=\"h-4 w-4 text-white\" />\n        </button>\n      </div>\n    );\n  }\n  return (\n    <UploadDropzone\n      endpoint={endpoint}\n      onClientUploadComplete={(res) => {\n        onChange(res?.[0].url);\n      }}\n      onUploadError={(error: Error) => {\n        console.log(error);\n      }}\n    />\n  );\n}\nexport default ImageUpload;"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAWA,SAAS,YAAY,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAoB;IAClE,IAAI,OAAO;QACT,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,KAAK;oBAAO,KAAI;oBAAS,WAAU;;;;;;8BACxC,6LAAC;oBACC,SAAS,IAAM,SAAS;oBACxB,WAAU;oBACV,MAAK;8BAEL,cAAA,6LAAC,mMAAA,CAAA,QAAK;wBAAC,WAAU;;;;;;;;;;;;;;;;;IAIzB;IACA,qBACE,6LAAC,6HAAA,CAAA,iBAAc;QACb,UAAU;QACV,wBAAwB,CAAC;YACvB,SAAS,KAAK,CAAC,EAAE,CAAC;QACpB;QACA,eAAe,CAAC;YACd,QAAQ,GAAG,CAAC;QACd;;;;;;AAGN;KA1BS;uCA2BM"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 320, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/CreatePost.tsx"],"sourcesContent":["\"use client\";\nimport { useUser } from \"@clerk/nextjs\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Card, CardContent } from \"./ui/card\";\nimport { Avatar, AvatarImage } from \"./ui/avatar\";\nimport { Textarea } from \"./ui/textarea\";\nimport { Button } from \"./ui/button\";\nimport { ImageIcon, Loader2Icon, SendIcon } from \"lucide-react\";\nimport { createPost } from \"@/actions/post.action\";\nimport toast from \"react-hot-toast\";\nimport ImageUpload from \"./ImageUpload\";\n\nfunction CreatePost() {\n  const { user } = useUser();\n  const [content, setContent] = useState(\"\");\n  const [imageUrl, setImageUrl] = useState(\"\");\n  const [isPosting, setIsPosting] = useState(false);\n  const [showImageUpload, setShowImageUpload] = useState(false);\n\n  const handleSubmit = async () => {\n    if (!content.trim() && !imageUrl) return;\n    setIsPosting(true);\n    try {\n      const result = await createPost(content, imageUrl);\n      if (result?.success) {\n        setContent(\"\");\n        setImageUrl(\"\");\n        setShowImageUpload(false);\n        toast.success(\"Амжилттай нийтлэгдлээ\");\n      } else {\n      }\n    } catch (error) {\n      console.error(error);\n      toast.error(\"Алдаа гарлаа. Дахин оролдоно уу\");\n    } finally {\n      setIsPosting(false);\n    }\n  };\n\n  if (!user) return null;\n\n  return (\n    <Card className=\"mb-6\">\n      <CardContent className=\"pt-6\">\n        <div className=\"space-y-4\">\n          <div className=\"flex space-x-4\">\n            <Avatar className=\"w-10 h-10\">\n              <AvatarImage src={user?.imageUrl || \"avatar.jpg\"}></AvatarImage>\n            </Avatar>\n            <Textarea\n              placeholder=\"Та юу бичмээр байна?\"\n              className=\"min-h-[100px] resize-none border-none focus-visible:ring-0 p-0 text-base\"\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n              disabled={isPosting}\n            ></Textarea>\n          </div>\n          {(showImageUpload || imageUrl) && (\n            <div className=\"border rounded-lg p-4\">\n              <ImageUpload\n                endpoint=\"postImage\"\n                value={imageUrl}\n                onChange={(url) => {\n                  setImageUrl(url);\n                  if (!url) setShowImageUpload(false);\n                }}\n              />\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex items-center justify-between border-t pt-4\">\n          <div className=\"flex space-x-2\">\n            <Button\n              type=\"button\"\n              variant=\"ghost\"\n              size={\"sm\"}\n              className=\"text-muted-foreground hover:text-primary\"\n              onClick={() => setShowImageUpload(!showImageUpload)}\n              disabled={isPosting}\n            >\n              <ImageIcon className=\"size-4 mr-2\" />\n              Зураг оруулах\n            </Button>\n          </div>\n          <Button\n            className=\"flex item-center\"\n            onClick={handleSubmit}\n            disabled={(!content.trim() && !imageUrl) || isPosting}\n          >\n            {isPosting ? (\n              <>\n                <Loader2Icon className=\"size-4 mr-2 animate-spin\" />\n                Нийтэлж байна\n              </>\n            ) : (\n              <>\n                <SendIcon className=\"size-4 mr-2\" />\n                Нийтлэх\n              </>\n            )}\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default CreatePost;\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AATA;AAMA;AAAA;AAAA;;;AAPA;;;;;;;;;;;AAYA,SAAS;;IACP,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,+JAAA,CAAA,UAAO,AAAD;IACvB,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvD,MAAM,eAAe;QACnB,IAAI,CAAC,QAAQ,IAAI,MAAM,CAAC,UAAU;QAClC,aAAa;QACb,IAAI;YACF,MAAM,SAAS,MAAM,CAAA,GAAA,oIAAA,CAAA,aAAU,AAAD,EAAE,SAAS;YACzC,IAAI,QAAQ,SAAS;gBACnB,WAAW;gBACX,YAAY;gBACZ,mBAAmB;gBACnB,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC;YAChB,OAAO,CACP;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC;YACd,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;QACd,SAAU;YACR,aAAa;QACf;IACF;IAEA,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,6LAAC,mIAAA,CAAA,OAAI;QAAC,WAAU;kBACd,cAAA,6LAAC,mIAAA,CAAA,cAAW;YAAC,WAAU;;8BACrB,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC,qIAAA,CAAA,SAAM;oCAAC,WAAU;8CAChB,cAAA,6LAAC,qIAAA,CAAA,cAAW;wCAAC,KAAK,MAAM,YAAY;;;;;;;;;;;8CAEtC,6LAAC,uIAAA,CAAA,WAAQ;oCACP,aAAY;oCACZ,WAAU;oCACV,OAAO;oCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oCAC1C,UAAU;;;;;;;;;;;;wBAGb,CAAC,mBAAmB,QAAQ,mBAC3B,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,oIAAA,CAAA,UAAW;gCACV,UAAS;gCACT,OAAO;gCACP,UAAU,CAAC;oCACT,YAAY;oCACZ,IAAI,CAAC,KAAK,mBAAmB;gCAC/B;;;;;;;;;;;;;;;;;8BAMR,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,qIAAA,CAAA,SAAM;gCACL,MAAK;gCACL,SAAQ;gCACR,MAAM;gCACN,WAAU;gCACV,SAAS,IAAM,mBAAmB,CAAC;gCACnC,UAAU;;kDAEV,6LAAC,2MAAA,CAAA,YAAS;wCAAC,WAAU;;;;;;oCAAgB;;;;;;;;;;;;sCAIzC,6LAAC,qIAAA,CAAA,SAAM;4BACL,WAAU;4BACV,SAAS;4BACT,UAAU,AAAC,CAAC,QAAQ,IAAI,MAAM,CAAC,YAAa;sCAE3C,0BACC;;kDACE,6LAAC,wNAAA,CAAA,cAAW;wCAAC,WAAU;;;;;;oCAA6B;;6DAItD;;kDACE,6LAAC,yMAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;oCAAgB;;;;;;;;;;;;;;;;;;;;;;;;;AASpD;GA9FS;;QACU,+JAAA,CAAA,UAAO;;;KADjB;uCAgGM"}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 542, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/actions/user.action.tsx"],"sourcesContent":["\"use server\";\n\nimport prisma from \"@/lib/prisma\";\nimport { auth, currentUser } from \"@clerk/nextjs/server\";\nimport { revalidatePath } from \"next/cache\";\n\nexport async function syncUser() {\n  try {\n    const { userId } = await auth();\n    const user = await currentUser();\n    if (!userId || !user) return;\n\n    const existingUser = await prisma.user.findUnique({\n      where: { clerkId: userId },\n    });\n\n    if (existingUser) return existingUser;\n\n    const dbUser = await prisma.user.create({\n      data: {\n        clerkId: userId,\n        name: `${user.firstName || \"\"} ${user.lastName || \"\"}`,\n        username:\n          user.username ?? user.emailAddresses[0].emailAddress.split(\"@\")[0],\n        email: user.emailAddresses[0].emailAddress,\n        image: user.imageUrl,\n      },\n    });\n    return dbUser;\n  } catch (error) {}\n}\n\nexport async function getUserByClerkId(clerkId: string) {\n  return await prisma.user.findUnique({\n    where: { clerkId: clerkId },\n    include: {\n      _count: {\n        select: {\n          followers: true,\n          following: true,\n          posts: true,\n        },\n      },\n    },\n  });\n}\n\nexport async function getDBUserID() {\n  const { userId: clerkId } = await auth();\n  if (!clerkId) return null\n\n  const user = await getUserByClerkId(clerkId);\n  if (!user) throw new Error(\"User not found in database\");\n\n  return user.id;\n}\n\nexport async function getRandomUsers() {\n  try {\n    const userId = await getDBUserID();\n\n    if (!userId) return [];\n\n    // get 3 random users exclude ourselves & users that we already follow\n    const randomUsers = await prisma.user.findMany({\n      where: {\n        AND: [\n          {NOT: { id: userId } },\n          {\n            NOT: {\n              followers: {\n                some: {\n                  followerId: userId,\n                },\n              },\n            },\n          },\n        ],\n      },\n      select: {\n        id: true,\n        name: true,\n        username: true,\n        image: true,\n        _count: {\n          select: {\n            followers: true,\n          },\n        },\n      },\n      take: 3,\n    });\n\n    return randomUsers;\n  } catch (error) {\n    console.log(\"Error fetching random users\", error);\n    return [];\n  }\n}\n\nexport async function toggleFollow(targetUserId: string) {\n  try {\n    const userId = await getDBUserID();\n    if (!userId) return;\n\n    if (userId === targetUserId) throw new Error(\"Cannot follow yourself\");\n    const existFollow = await prisma.follows.findFirst({\n      where: {\n        followerId: userId,\n        followingId: targetUserId,\n      },\n    });\n    if (existFollow) {\n      await prisma.follows.delete({\n        where: {\n          followerId_followingId: {\n            followerId: userId,\n            followingId: targetUserId,\n          },\n        },\n      });\n    } else {\n      await prisma.$transaction([\n        prisma.follows.create({\n          data: {\n            followerId: userId,\n            followingId: targetUserId,\n          },\n        }),\n        prisma.notification.create({\n          data: { type: \"FOLLOW\", userId: targetUserId, creatorId: userId },\n        }),\n      ]);\n    }\n    revalidatePath(\"/\");\n    return { success: true };\n  } catch (error) {\n    console.error(error);\n    return { success: false, error: \"Failed to follow user\" };\n  }\n}\n"],"names":[],"mappings":";;;;;;;;;IAMsB;IA0BA;IAeA;IAUA;IA2CA"}},
    {"offset": {"line": 556, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 562, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/FollowButton.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState } from \"react\";\nimport { Button } from \"./ui/button\";\nimport { Loader2Icon } from \"lucide-react\";\nimport toast from \"react-hot-toast\";\nimport { toggleFollow } from \"@/actions/user.action\";\n\nexport default function FollowButton({ userId }: { userId: string }) {\n  const [isLoading, setIsLoading] = useState(false);\n  const handleFollow = async () => {\n    setIsLoading(true);\n    try{\n        // follow user\n        await toggleFollow(userId)\n        toast.success(\"Амжилттай дагалаа\");\n    }catch(error){\n      console.error(error);\n      toast.error(\"Алдаа гарлаа. Дахин оролдоно уу\");\n    }finally{\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <Button\n      size={\"sm\"}\n      variant={\"secondary\"}\n      onClick={handleFollow}\n      disabled={isLoading}\n      className=\"w-20\"\n    >\n      {isLoading ? <Loader2Icon className=\"size-4 animate-spin\" /> : \"Дагах\"}\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAEA;AACA;AAFA;;;AAHA;;;;;;AAOe,SAAS,aAAa,EAAE,MAAM,EAAsB;;IACjE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,eAAe;QACnB,aAAa;QACb,IAAG;YACC,cAAc;YACd,MAAM,CAAA,GAAA,oIAAA,CAAA,eAAY,AAAD,EAAE;YACnB,0JAAA,CAAA,UAAK,CAAC,OAAO,CAAC;QAClB,EAAC,OAAM,OAAM;YACX,QAAQ,KAAK,CAAC;YACd,0JAAA,CAAA,UAAK,CAAC,KAAK,CAAC;QACd,SAAQ;YACN,aAAa;QACf;IACF;IAEA,qBACE,6LAAC,qIAAA,CAAA,SAAM;QACL,MAAM;QACN,SAAS;QACT,SAAS;QACT,UAAU;QACV,WAAU;kBAET,0BAAY,6LAAC,wNAAA,CAAA,cAAW;YAAC,WAAU;;;;;mBAA2B;;;;;;AAGrE;GA3BwB;KAAA"}},
    {"offset": {"line": 621, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 627, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAEA;AAGA;AACA;AAHA;AAHA;;;;;;AAQA,MAAM,cAAc,+KAAqB,IAAI;AAE7C,MAAM,qBAAqB,+KAAqB,OAAO;AAEvD,MAAM,oBAAoB,+KAAqB,MAAM;AAErD,MAAM,mCAAqB,8JAAM,UAAU,CAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,OAAO;QAC3B,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,0JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;KAVH;AAaN,mBAAmB,WAAW,GAAG,+KAAqB,OAAO,CAAC,WAAW;AAEzE,MAAM,mCAAqB,8JAAM,UAAU,OAGzC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,+KAAqB,OAAO;gBAC3B,KAAK;gBACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,+fACA;gBAED,GAAG,KAAK;;;;;;;;;;;;;AAIf,mBAAmB,WAAW,GAAG,+KAAqB,OAAO,CAAC,WAAW;AAEzE,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,oDACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,oBAAoB,CAAC,EACzB,SAAS,EACT,GAAG,OACkC,iBACrC,6LAAC;QACC,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;MATP;AAYN,kBAAkB,WAAW,GAAG;AAEhC,MAAM,iCAAmB,8JAAM,UAAU,OAGvC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,KAAK;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,yBAAyB;QACtC,GAAG,KAAK;;;;;;;AAGb,iBAAiB,WAAW,GAAG,+KAAqB,KAAK,CAAC,WAAW;AAErE,MAAM,uCAAyB,8JAAM,UAAU,OAG7C,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,WAAW;QAC/B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAGb,uBAAuB,WAAW,GAChC,+KAAqB,WAAW,CAAC,WAAW;AAE9C,MAAM,kCAAoB,8JAAM,UAAU,OAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,MAAM;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EAAE,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,KAAK;QAC/B,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,+KAAqB,MAAM,CAAC,WAAW;AAEvE,MAAM,kCAAoB,8JAAM,UAAU,QAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,6LAAC,+KAAqB,MAAM;QAC1B,KAAK;QACL,WAAW,CAAA,GAAA,sHAAA,CAAA,KAAE,AAAD,EACV,CAAA,GAAA,qIAAA,CAAA,iBAAc,AAAD,EAAE;YAAE,SAAS;QAAU,IACpC,gBACA;QAED,GAAG,KAAK;;;;;;;AAGb,kBAAkB,WAAW,GAAG,+KAAqB,MAAM,CAAC,WAAW"}},
    {"offset": {"line": 773, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 779, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/DeleteAlertDialog.tsx"],"sourcesContent":["\"use client\";\n\nimport { Loader2Icon, Trash2Icon } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n  AlertDialogTrigger,\n} from \"@/components/ui/alert-dialog\";\n\ninterface DeleteAlertDialogProps {\n  isDeleting: boolean;\n  onDelete: () => Promise<void>;\n  title?: string;\n  description?: string;\n}\n\nexport function DeleteAlertDialog({\n  isDeleting,\n  onDelete,\n  title = \"Пост устгах\",\n  description = \"Энэхүү үйлдэл нь буцаагдахгүй үйлдэл юм.\",\n}: DeleteAlertDialogProps) {\n  return (\n    <AlertDialog>\n      <AlertDialogTrigger asChild>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"text-muted-foreground hover:text-red-500 -mr-2\"\n        >\n          {isDeleting ? (\n            <Loader2Icon className=\"size-4 animate-spin\" />\n          ) : (\n            <Trash2Icon className=\"size-4\" />\n          )}\n        </Button>\n      </AlertDialogTrigger>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>{title}</AlertDialogTitle>\n          <AlertDialogDescription>{description}</AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel>Цуцлах</AlertDialogCancel>\n          <AlertDialogAction\n            onClick={onDelete}\n            className=\"bg-red-500 hover:bg-red-600\"\n            disabled={isDeleting}\n          >\n            {isDeleting ? \"Deleting...\" : \"Delete\"}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}"],"names":[],"mappings":";;;;AAGA;AACA;AAFA;AAAA;AAFA;;;;;AAuBO,SAAS,kBAAkB,EAChC,UAAU,EACV,QAAQ,EACR,QAAQ,aAAa,EACrB,cAAc,0CAA0C,EACjC;IACvB,qBACE,6LAAC,8IAAA,CAAA,cAAW;;0BACV,6LAAC,8IAAA,CAAA,qBAAkB;gBAAC,OAAO;0BACzB,cAAA,6LAAC,qIAAA,CAAA,SAAM;oBACL,SAAQ;oBACR,MAAK;oBACL,WAAU;8BAET,2BACC,6LAAC,wNAAA,CAAA,cAAW;wBAAC,WAAU;;;;;6CAEvB,6LAAC,iNAAA,CAAA,aAAU;wBAAC,WAAU;;;;;;;;;;;;;;;;0BAI5B,6LAAC,8IAAA,CAAA,qBAAkB;;kCACjB,6LAAC,8IAAA,CAAA,oBAAiB;;0CAChB,6LAAC,8IAAA,CAAA,mBAAgB;0CAAE;;;;;;0CACnB,6LAAC,8IAAA,CAAA,yBAAsB;0CAAE;;;;;;;;;;;;kCAE3B,6LAAC,8IAAA,CAAA,oBAAiB;;0CAChB,6LAAC,8IAAA,CAAA,oBAAiB;0CAAC;;;;;;0CACnB,6LAAC,8IAAA,CAAA,oBAAiB;gCAChB,SAAS;gCACT,WAAU;gCACV,UAAU;0CAET,aAAa,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;AAM1C;KAvCgB"}},
    {"offset": {"line": 892, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 898, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/PostCard.tsx"],"sourcesContent":["\"use client\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport {\n  createComment,\n  deletePost,\n  getPosts,\n  toggleLike,\n} from \"@/actions/post.action\";\nimport { SignInButton, useUser } from \"@clerk/nextjs\";\nimport { toast } from \"react-hot-toast\";\nimport { Card, CardContent } from \"./ui/card\";\nimport { Button } from \"./ui/button\";\nimport {\n  HeartIcon,\n  LogInIcon,\n  MessageCircleIcon,\n  SendIcon,\n} from \"lucide-react\";\nimport { Avatar, AvatarImage } from \"@radix-ui/react-avatar\";\nimport { Textarea } from \"./ui/textarea\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { mn } from 'date-fns/locale'\n\nimport { DeleteAlertDialog } from \"./DeleteAlertDialog\";\nimport Link from \"next/link\";\n\nimport Zoom  from 'react-medium-image-zoom'\nimport 'react-medium-image-zoom/dist/styles.css'\n\nimport mediumZoom from 'medium-zoom'\nimport 'medium-zoom/dist/style.css'\n\n\ntype Posts = Awaited<ReturnType<typeof getPosts>>; //getPosts функцын буцаах утгын төрлийг (ReturnType) ашиглан тодорхойлогдож байна. Гэхдээ getPosts функц нь Promise буцаадаг тул Awaited ашиглан Promise-ын доторх утгын төрлийг гаргаж авч байна.\ntype Post = Posts[number];\n\nfunction PostCard({ post, dbUserId }: { post: Post; dbUserId: string | null }) {\n  const { user } = useUser();\n  const [newComment, setNewComment] = useState(\"\");\n  const [isCommenting, setIsCommenting] = useState(false);\n  const [isLiking, setIsLiking] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [hasLiked, setHasLiked] = useState(\n    post.likes.some((like) => like.userId === dbUserId)\n  );\n  const [optimisticLikes, setOptimisticLikes] = useState(post._count.likes);\n  const [showComments, setShowComments] = useState(false);\n\n  const zoomRef = useRef(null);\n\n  useEffect(() => {\n    if (zoomRef.current) {\n      mediumZoom(zoomRef.current, {\n        background: 'rgba(30, 30, 30, 0.9)', \n        margin: 16, \n      });\n    }\n  }, []);\n  \n  const handleLike = async () => {\n    if (isLiking) return;\n    try {\n      setIsLiking(true);\n      setHasLiked((prev) => !prev);\n      setOptimisticLikes((prev) => prev + (hasLiked ? -1 : 1));\n      await toggleLike(post.id);\n    } catch (error) {\n      console.error(error);\n    } finally {\n      setIsLiking(false);\n    }\n  };\n  const handleAddComment = async () => {\n    if (!newComment.trim() || isCommenting) return;\n    try {\n      setIsCommenting(true);\n      const result = await createComment(post.id, newComment);\n      if (result?.success) {\n        toast.success(\"Сэтгэгдэл бичигдлээ <3\");\n        setNewComment(\"\");\n      }\n    } catch (error) {\n      toast.error(\"Сэтгэгдэл бичиж чадсангүй!\");\n    } finally {\n      setIsCommenting(false);\n    }\n  };\n  const handleDeletePost = async () => {\n    if (isDeleting) return;\n    try {\n      setIsDeleting(true);\n      const result = await deletePost(post.id);\n      if (result?.success) toast.success(\"Пост устлаа\");\n      else throw new Error(result.error);\n    } catch (error) {\n      toast.error(\"Устгаж чадсангүй\" + error);\n    }\n  };\n\n  return (\n    <Card className=\"overflow-hidden\">\n      <CardContent className=\"p-4 sm:p-6\">\n        <div className=\"space-y-4\">\n          <div className=\"flex space-x-3 sm:space-x-4\">\n            <Link href={`/profile/${post.author.username}`}>\n              <Avatar className=\"size-8 sm:w-10\">\n                <AvatarImage src={post.author.image ?? \"/avatar.png\"} className=\" w-10 h-10 rounded-full\" />\n              </Avatar>\n            </Link>\n\n            {/* POST HEADER & TEXT CONTENT */}\n            <div className=\"flex-1 min-w-0\">\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex flex-col sm:flex-row sm:items-center sm:space-x-2 truncate\">\n                  <Link\n                    href={`/profile/${post.author.username}`}\n                    className=\"font-semibold truncate\"\n                  >\n                    {post.author.name}\n                  </Link>\n                  <div className=\"flex items-center space-x-2 text-sm text-muted-foreground\">\n                    <Link href={`/profile/${post.author.username}`}>\n                      @{post.author.username}\n                    </Link>\n                    <span>•</span>\n                    <span>\n                      {formatDistanceToNow(new Date(post.createdAt), {locale: mn})} өмнө\n                    </span>\n                  </div>\n                </div>\n                {/* Check if current user is the post author */}\n                {dbUserId === post.author.id && (\n                  <DeleteAlertDialog\n                    isDeleting={isDeleting}\n                    onDelete={handleDeletePost}\n                  />\n                )}\n              </div>\n              <p className=\"mt-2 text-sm text-foreground break-words\">\n                {post.content}\n              </p>\n            </div>\n          </div>\n\n          {/* POST IMAGE */}\n          {post.image && (\n            <div className=\"rounded-lg overflow-hidden\">\n<Zoom>\n    <img\n     // ref={zoomRef}\n                src={post.image}\n                alt=\"Post content\"\n                className=\"w-full h-auto object-cover\"\n              />\n           </Zoom>\n            </div>\n          )}\n\n          {/* LIKE & COMMENT BUTTONS */}\n          <div className=\"flex items-center pt-2 space-x-4\">\n            {user ? (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className={`text-muted-foreground gap-2 ${\n                  hasLiked\n                    ? \"text-red-500 hover:text-red-600\"\n                    : \"hover:text-red-500\"\n                }`}\n                onClick={handleLike}\n              >\n                {hasLiked ? (\n                  <HeartIcon className=\"size-5 fill-current\" />\n                ) : (\n                  <HeartIcon className=\"size-5\" />\n                )}\n                <span>{optimisticLikes}</span>\n              </Button>\n            ) : (\n              <SignInButton mode=\"modal\">\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"text-muted-foreground gap-2\"\n                >\n                  <HeartIcon className=\"size-5\" />\n                  <span>{optimisticLikes}</span>\n                </Button>\n              </SignInButton>\n            )}\n\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"text-muted-foreground gap-2 hover:text-blue-500\"\n              onClick={() => setShowComments((prev) => !prev)}\n            >\n              <MessageCircleIcon\n                className={`size-5 ${\n                  showComments ? \"fill-blue-500 text-blue-500\" : \"\"\n                }`}\n              />\n              <span>{post.comments.length}</span>\n            </Button>\n          </div>\n\n          {/* COMMENTS SECTION */}\n          {showComments && (\n            <div className=\"space-y-4 pt-4 border-t\">\n              <div className=\"space-y-4\">\n                {/* DISPLAY COMMENTS */}\n                {post.comments.map((comment) => (\n                  <div key={comment.id} className=\"flex space-x-3\">\n                    <Avatar className=\"size-8 flex-shrink-0\">\n                      <AvatarImage\n                        src={comment.author.image ?? \"/avatar.png\"} className=\"rounded-full\"\n                      />\n                    </Avatar>\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex flex-wrap items-center gap-x-2 gap-y-1\">\n                        <span className=\"font-medium text-sm\">\n                          {comment.author.name}\n                        </span>\n                        <span className=\"text-sm text-muted-foreground\">\n                          @{comment.author.username}\n                        </span>\n                        <span className=\"text-sm text-muted-foreground\">·</span>\n                        <span className=\"text-sm text-muted-foreground\">\n                          {formatDistanceToNow(new Date(comment.createdAt),  {locale: mn})} өмнө\n                        </span>\n                      </div>\n                      <p className=\"text-sm break-words\">{comment.content}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {user ? (\n                <div className=\"flex space-x-3\">\n                  <Avatar className=\"size-8 flex-shrink-0\">\n                    <AvatarImage src={user?.imageUrl || \"/avatar.png\"}  className=\"rounded-full\"/>\n                  </Avatar>\n                  <div className=\"flex-1\">\n                    <Textarea\n                      placeholder=\"Сэтгэгдэл бичнэ үү...\"\n                      value={newComment}\n                      onChange={(e) => setNewComment(e.target.value)}\n                      className=\"min-h-[80px] resize-none\"\n                    />\n                    <div className=\"flex justify-end mt-2\">\n                      <Button\n                        size=\"sm\"\n                        onClick={handleAddComment}\n                        className=\"flex items-center gap-2\"\n                        disabled={!newComment.trim() || isCommenting}\n                      >\n                        {isCommenting ? (\n                          \"Нийтэлж байна...\"\n                        ) : (\n                          <>\n                            <SendIcon className=\"size-4\" />\n                            Сэтгэгдэл\n                          </>\n                        )}\n                      </Button>\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex justify-center p-4 border rounded-lg bg-muted/50\">\n                  <SignInButton mode=\"modal\">\n                    <Button variant=\"outline\" className=\"gap-2\">\n                      <LogInIcon className=\"size-4\" />\n                      Нэвтрэх{\" \"}\n                    </Button>\n                  </SignInButton>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport default PostCard;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1492, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}