{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/lib/mongoose.ts"],"sourcesContent":["import mongoose from \"mongoose\";\n\nconst MONGODB_URI = process.env.MONGODB_URI as string;\n\nif (!MONGODB_URI) {\n  throw new Error(\"Please define the MONGODB_URI environment variable.\");\n}\n\nlet cached = (global as any).mongoose || { conn: null, promise: null };\n\nexport async function connectDB() {\n  if (cached.conn) return cached.conn;\n\n  if (!cached.promise) {\n    cached.promise = mongoose.connect(MONGODB_URI, {\n      dbName: \"ecommerce\",\n    });\n  }\n\n  try {\n    cached.conn = await cached.promise;\n    console.log(\"MongoDB Connected\");\n    return cached.conn;\n  } catch (error) {\n    console.error(\"MongoDB Connection Error:\", error);\n    throw error;\n  }\n}"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW;AAE3C,IAAI,CAAC,aAAa;IAChB,MAAM,IAAI,MAAM;AAClB;AAEA,IAAI,SAAS,AAAC,OAAe,QAAQ,IAAI;IAAE,MAAM;IAAM,SAAS;AAAK;AAE9D,eAAe;IACpB,IAAI,OAAO,IAAI,EAAE,OAAO,OAAO,IAAI;IAEnC,IAAI,CAAC,OAAO,OAAO,EAAE;QACnB,OAAO,OAAO,GAAG,yGAAA,CAAA,UAAQ,CAAC,OAAO,CAAC,aAAa;YAC7C,QAAQ;QACV;IACF;IAEA,IAAI;QACF,OAAO,IAAI,GAAG,MAAM,OAAO,OAAO;QAClC,QAAQ,GAAG,CAAC;QACZ,OAAO,OAAO,IAAI;IACpB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,MAAM;IACR;AACF"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 98, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/models/productMongo.ts"],"sourcesContent":["import mongoose, { Schema, Document, Model } from \"mongoose\";\n\nexport interface IProduct extends Document {\n    _id: number;\n    title: string;\n    description: string;\n    price: number;\n    image: string;\n}\n\nconst UserSchema = new Schema<IProduct>(\n    {\n        _id: { type: Number, required: true },\n        title: { type: String, required: true, unique: true },\n        description: { type: String, required: true },\n        price: { type: Number, required: true },\n        image: { type: String, required: false },\n    },\n    { timestamps: true }\n);\n\nexport const Products: Model<IProduct> =\n  mongoose.models.Products || mongoose.model<IProduct>(\"products\", UserSchema);"],"names":[],"mappings":";;;AAAA;;AAUA,MAAM,aAAa,IAAI,yGAAA,CAAA,SAAM,CACzB;IACI,KAAK;QAAE,MAAM;QAAQ,UAAU;IAAK;IACpC,OAAO;QAAE,MAAM;QAAQ,UAAU;QAAM,QAAQ;IAAK;IACpD,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAM;AAC3C,GACA;IAAE,YAAY;AAAK;AAGhB,MAAM,WACX,yGAAA,CAAA,UAAQ,CAAC,MAAM,CAAC,QAAQ,IAAI,yGAAA,CAAA,UAAQ,CAAC,KAAK,CAAW,YAAY"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 231, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/lib/logger.tsx"],"sourcesContent":["// src/lib/logger.ts\nimport winston from \"winston\";\n\nexport const logger = winston.createLogger({\n  level: \"info\",\n  format: winston.format.json(),\n  transports: [new winston.transports.Console()],\n});"],"names":[],"mappings":"AAAA,oBAAoB;;;;AACpB;;AAEO,MAAM,SAAS,2IAAA,CAAA,UAAO,CAAC,YAAY,CAAC;IACzC,OAAO;IACP,QAAQ,2IAAA,CAAA,UAAO,CAAC,MAAM,CAAC,IAAI;IAC3B,YAAY;QAAC,IAAI,2IAAA,CAAA,UAAO,CAAC,UAAU,CAAC,OAAO;KAAG;AAChD"}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 250, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/actions/product.action.tsx"],"sourcesContent":["\"use server\";\n\nimport { connectDB } from \"@/lib/mongoose\";\nimport { Products } from \"@/models/productMongo\";\nimport { revalidatePath, unstable_cache } from \"next/cache\";\nimport { logger } from \"@/lib/logger\";\n\nexport const getCachedProducts = unstable_cache(async () => {\n  try {\n    await connectDB();\n    const products = await Products.find({});\n    return products;\n  } catch (error) {\n    logger.error(\"Error fetching products:\", error);\n    throw new Error(\"Failed to fetch products\");\n  }\n}, [\"products\"], { revalidate: 3600 });\n\nexport async function getProductById(productId: string) {\n  try {\n    await connectDB();\n    const product = await Products.findById(productId);\n    if (!product) throw new Error(\"Product not found\");\n    return product;\n  } catch (error) {\n    logger.error(`Error fetching product ID ${productId}:`, error);\n    throw new Error(\"Failed to fetch product\");\n  }\n}\n\nexport async function checkExistingProduct(name: string) {\n  try {\n    await connectDB();\n    return await Products.findOne({ name });\n  } catch (error) {\n    logger.error(`Error checking existing product ${name}:`, error);\n    throw new Error(\"Failed to check product existence\");\n  }\n}\n\nexport async function createProduct(name: string, price: number, description: string) {\n  try {\n    await connectDB();\n\n    const existingProduct = await checkExistingProduct(name);\n    if (existingProduct) throw new Error(\"Product already exists\");\n\n    const newProduct = new Products({ name, price, description });\n    await newProduct.save();\n\n    revalidatePath(\"/products\");\n\n    logger.info(`Product created: ${name}`);\n    return newProduct;\n  } catch (error) {\n    logger.error(\"Error creating product:\", error);\n    throw new Error(\"Failed to create product\");\n  }\n}\n\nexport async function updateProduct(productId: string, updateData: Partial<{ name: string; price: number; description: string }>) {\n  try {\n    await connectDB();\n    const updatedProduct = await Products.findByIdAndUpdate(productId, updateData, { new: true });\n\n    if (!updatedProduct) throw new Error(\"Product not found\");\n\n    // Revalidate cache\n    revalidatePath(\"/products\");\n\n    logger.info(`Product updated: ${productId}`);\n    return updatedProduct;\n  } catch (error) {\n    logger.error(`Error updating product ID ${productId}:`, error);\n    throw new Error(\"Failed to update product\");\n  }\n}\n\nexport async function deleteProduct(productId: string) {\n  try {\n    await connectDB();\n    const deletedProduct = await Products.findByIdAndDelete(productId);\n    \n    if (!deletedProduct) throw new Error(\"Product not found\");\n\n    revalidatePath(\"/products\");\n\n    logger.info(`Product deleted: ${productId}`);\n    return deletedProduct;\n  } catch (error) {\n    logger.error(`Error deleting product ID ${productId}:`, error);\n    throw new Error(\"Failed to delete product\");\n  }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 370, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 376, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/app/api/products/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { getCachedProducts, createProduct } from \"@/actions/product.action\";\n\nexport async function GET() {\n  try {\n    const products = await getCachedProducts();\n    return NextResponse.json({ success: true, data: products }, { status: 200 });\n  } catch (error) {\n    return NextResponse.json({ success: false, error  }, { status: 500 });\n  }\n}\n\nexport async function POST(req: Request) {\n  try {\n    const { name, price, description } = await req.json();\n    const newProduct = await createProduct(name, price, description);\n    \n    return NextResponse.json({ success: true, data: newProduct }, { status: 201 });\n  } catch (error) {\n    return NextResponse.json({ success: false, error }, { status: 400 });\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,CAAA,GAAA,sIAAA,CAAA,oBAAiB,AAAD;QACvC,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAS,GAAG;YAAE,QAAQ;QAAI;IAC5E,EAAE,OAAO,OAAO;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO;QAAO,GAAG;YAAE,QAAQ;QAAI;IACrE;AACF;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,GAAG,MAAM,IAAI,IAAI;QACnD,MAAM,aAAa,MAAM,CAAA,GAAA,sIAAA,CAAA,gBAAa,AAAD,EAAE,MAAM,OAAO;QAEpD,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,MAAM;QAAW,GAAG;YAAE,QAAQ;QAAI;IAC9E,EAAE,OAAO,OAAO;QACd,OAAO,gIAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO;QAAM,GAAG;YAAE,QAAQ;QAAI;IACpE;AACF"}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}