{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/actions/notification.action.tsx"],"sourcesContent":["\"use server\";\n\nimport prisma from \"@/lib/prisma\";\nimport { getDBUserID } from \"./user.action\";\n\nexport async function getNotifications() {\n  try {\n    const userId = await getDBUserID();\n    if (!userId) return [];\n\n    const notifications = await prisma.notification.findMany({\n      where: {\n        userId,\n      },\n      include: {\n        creator: {\n          select: {\n            id: true,\n            name: true,\n            username: true,\n            image: true,\n          },\n        },\n        post: {\n          select: {\n            id: true,\n            content: true,\n            image: true,\n          },\n        },\n        comment: {\n          select: {\n            id: true,\n            content: true,\n            createdAt: true,\n          },\n        },\n      },\n      orderBy: {\n        createdAt: \"desc\",\n      },\n    });\n\n    return notifications;\n  } catch (error) {\n    console.error(\"Error fetching notifications:\", error);\n    throw new Error(\"Failed to fetch notifications\");\n  }\n}\n\nexport async function markNotificationsAsRead(notificationIds: string[]) {\n  try {\n    await prisma.notification.updateMany({\n      where: {\n        id: {\n          in: notificationIds,\n        },\n      },\n      data: {\n        read: true,\n      },\n    });\n\n    return { success: true };\n  } catch (error) {\n    console.error(\"Error marking notifications as read:\", error);\n    return { success: false };\n  }\n}"],"names":[],"mappings":";;;;;;IAKsB;IA6CA"}},
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/ui/scroll-area.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }"],"names":[],"mappings":";;;;;AAEA;AAGA;AAFA;AAHA;;;;;AAOA,MAAM,2BAAa,sMAAM,UAAU,CAGjC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,8OAAC,2KAAoB,IAAI;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,4BAA4B;QACzC,GAAG,KAAK;;0BAET,8OAAC,2KAAoB,QAAQ;gBAAC,WAAU;0BACrC;;;;;;0BAEH,8OAAC;;;;;0BACD,8OAAC,2KAAoB,MAAM;;;;;;;;;;;AAG/B,WAAW,WAAW,GAAG,2KAAoB,IAAI,CAAC,WAAW;AAE7D,MAAM,0BAAY,sMAAM,UAAU,CAGhC,CAAC,EAAE,SAAS,EAAE,cAAc,UAAU,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC,2KAAoB,mBAAmB;QACtC,KAAK;QACL,aAAa;QACb,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iDACA,gBAAgB,cACd,sDACF,gBAAgB,gBACd,wDACF;QAED,GAAG,KAAK;kBAET,cAAA,8OAAC,2KAAoB,eAAe;YAAC,WAAU;;;;;;;;;;;AAGnD,UAAU,WAAW,GAAG,2KAAoB,mBAAmB,CAAC,WAAW"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-primary/10\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,0CAA0C;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/components/NotificationSkeleton.tsx"],"sourcesContent":["import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\nexport function NotificationsSkeleton() {\n  // array of 5 items\n  const skeletonItems = Array.from({ length: 5 }, (_, i) => i);\n\n  return (\n    <div className=\"space-y-4\">\n      <Card>\n        <CardHeader className=\"border-b\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle>Сонордуулга</CardTitle>\n            <Skeleton className=\"h-4 w-20\" />\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <ScrollArea className=\"h-[calc(100vh-12rem)]\">\n            {skeletonItems.map((index) => (\n              <div key={index} className=\"flex items-start gap-4 p-4 border-b\">\n                <Skeleton className=\"h-10 w-10 rounded-full\" />\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <Skeleton className=\"h-4 w-4\" />\n                    <Skeleton className=\"h-4 w-40\" />\n                  </div>\n                  <div className=\"pl-6 space-y-2\">\n                    <Skeleton className=\"h-20 w-full\" />\n                    <Skeleton className=\"h-4 w-24\" />\n                  </div>\n                </div>\n              </div>\n            ))}\n          </ScrollArea>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;AAEO,SAAS;IACd,mBAAmB;IACnB,MAAM,gBAAgB,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAE,GAAG,CAAC,GAAG,IAAM;IAE1D,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,gIAAA,CAAA,OAAI;;8BACH,8OAAC,gIAAA,CAAA,aAAU;oBAAC,WAAU;8BACpB,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,gIAAA,CAAA,YAAS;0CAAC;;;;;;0CACX,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;;;;;;;;;;;;8BAGxB,8OAAC,gIAAA,CAAA,cAAW;oBAAC,WAAU;8BACrB,cAAA,8OAAC,0IAAA,CAAA,aAAU;wBAAC,WAAU;kCACnB,cAAc,GAAG,CAAC,CAAC,sBAClB,8OAAC;gCAAgB,WAAU;;kDACzB,8OAAC,oIAAA,CAAA,WAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,oIAAA,CAAA,WAAQ;wDAAC,WAAU;;;;;;kEACpB,8OAAC,oIAAA,CAAA,WAAQ;wDAAC,WAAU;;;;;;;;;;;;0DAEtB,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,oIAAA,CAAA,WAAQ;wDAAC,WAAU;;;;;;kEACpB,8OAAC,oIAAA,CAAA,WAAQ;wDAAC,WAAU;;;;;;;;;;;;;;;;;;;+BAThB;;;;;;;;;;;;;;;;;;;;;;;;;;AAmBxB"}},
    {"offset": {"line": 260, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///Users/sodstar/development/web/frontend/x/src/app/notifications/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { getNotifications, markNotificationsAsRead } from \"@/actions/notification.action\";\nimport { NotificationsSkeleton } from \"@/components/NotificationSkeleton\";\nimport { Avatar, AvatarImage } from \"@/components/ui/avatar\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport { HeartIcon, MessageCircleIcon, UserPlusIcon } from \"lucide-react\";\nimport { mn } from \"date-fns/locale\";\nimport { useEffect, useState } from \"react\";\nimport toast from \"react-hot-toast\";\n\ntype Notifications = Awaited<ReturnType<typeof getNotifications>>;\ntype Notification = Notifications[number];\n\nconst getNotificationIcon = (type: string) => {\n  switch (type) {\n    case \"LIKE\":\n      return <HeartIcon className=\"size-4 text-red-500\" />;\n    case \"COMMENT\":\n      return <MessageCircleIcon className=\"size-4 text-blue-500\" />;\n    case \"FOLLOW\":\n      return <UserPlusIcon className=\"size-4 text-green-500\" />;\n    default:\n      return null;\n  }\n};\n\nfunction NotificationsPage() {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const fetchNotifications = async () => {\n      setIsLoading(true);\n      try {\n        const data = await getNotifications();\n        setNotifications(data);\n\n        const unreadIds = data.filter((n) => !n.read).map((n) => n.id);\n        if (unreadIds.length > 0) await markNotificationsAsRead(unreadIds);\n      } catch (error) {\n        toast.error(\"Failed to fetch notifications\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    fetchNotifications();\n  }, []);\n\n  if (isLoading) return <NotificationsSkeleton />;\n\n  return (\n    <div className=\"space-y-4\">\n      <Card>\n        <CardHeader className=\"border-b\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle>Сонордуулга</CardTitle>\n            <span className=\"text-sm text-muted-foreground\">\n              {notifications.filter((n) => !n.read).length} Уншаагүй\n            </span>\n          </div>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <ScrollArea className=\"h-[calc(100vh-12rem)]\">\n            {notifications.length === 0 ? (\n              <div className=\"p-4 text-center text-muted-foreground\">Сонордуулга байхгүй байна</div>\n            ) : (\n              notifications.map((notification) => (\n                <div\n                  key={notification.id}\n                  className={`flex items-start gap-4 p-4 border-b hover:bg-muted/25 transition-colors ${\n                    !notification.read ? \"bg-muted/50\" : \"\"\n                  }`}\n                >\n                  <Avatar className=\"mt-1\">\n                    <AvatarImage src={notification.creator.image ?? \"/avatar.png\"} />\n                  </Avatar>\n                  <div className=\"flex-1 space-y-1\">\n                    <div className=\"flex items-center gap-2\">\n                      {getNotificationIcon(notification.type)}\n                      <span>\n                        <span className=\"font-medium\">\n                          {notification.creator.name ?? notification.creator.username}\n                        </span>{\" \"}\n                        {notification.type === \"FOLLOW\"\n                          ? \"Таныг дагав\"\n                          : notification.type === \"LIKE\"\n                          ? \"Пост таалагдав\"\n                          : \"Сэтгэгдэл үлдээв\"}\n                      </span>\n                    </div>\n\n                    {notification.post &&\n                      (notification.type === \"LIKE\" || notification.type === \"COMMENT\") && (\n                        <div className=\"pl-6 space-y-2\">\n                          <div className=\"text-sm text-muted-foreground rounded-md p-2 bg-muted/30 mt-2\">\n                            <p>{notification.post.content}</p>\n                            {notification.post.image && (\n                              <img\n                                src={notification.post.image}\n                                alt=\"Post content\"\n                                className=\"mt-2 rounded-md w-full max-w-[200px] h-auto object-cover\"\n                              />\n                            )}\n                          </div>\n\n                          {notification.type === \"COMMENT\" && notification.comment && (\n                            <div className=\"text-sm p-2 bg-accent/50 rounded-md\">\n                              {notification.comment.content}\n                            </div>\n                          )}\n                        </div>\n                      )}\n\n                    <p className=\"text-sm text-muted-foreground pl-6\">\n                      {formatDistanceToNow(new Date(notification.createdAt), { addSuffix: true ,locale:mn},)}\n                    </p>\n                  </div>\n                </div>\n              ))\n            )}\n          </ScrollArea>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\nexport default NotificationsPage;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 533, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}